<?xml version="1.0" encoding="UTF-8"?>
<!--
  PRD VERSION: 1.0.0
  DATE: 2025-12-31
  STATUS: GENESIS PRD
  NOTE:
  This is the authoritative, human-authored PRD for the startup described below.
  This document is the single source of truth governing all AI-assisted planning,
  coding, debugging, deployment, orchestration, and teaching.
-->

<ProductRequirementsDocument>

  <!-- ========================================================= -->
  <!-- PRODUCT OVERVIEW                                         -->
  <!-- ========================================================= -->
  <ProductOverview>
    <!-- Target user is intentionally narrow to prevent scope creep -->
    <TargetUser>
      Solo founders and small technical teams building web-based startups using
      multiple AI models who require deterministic execution, governance, and
      lossless context transfer.
    </TargetUser>

    <CoreProblem>
      AI models are powerful individually but unreliable when collaborating.
      Context loss, silent assumptions, scope drift, and inconsistent decisions
      force humans to manually relay instructions, debug AI behavior, and reconcile
      outputs across tools.
    </CoreProblem>

    <ValueProposition>
      This product turns a Product Requirements Document (PRD) written in strict XML
      into an enforceable execution contract that governs how multiple AI models
      plan, build, debug, deploy, and teach without manual coordination.
    </ValueProposition>

    <ImmutableStackConfirmation>
      <!-- Any deviation from this stack is prohibited unless explicitly approved -->
      Figma for UX/UI authority.
      Supabase for backend services, authentication, and database.
      Stripe for payments and monetization.
      Vercel for hosting and deployment.
      GitHub as the sole source of code and artifacts.
      Claude for advanced reasoning, architecture, refactors, and debugging.
      ChatGPT for generation, structuring, summarization, and coordination.
      n8n for orchestration and execution.
    </ImmutableStackConfirmation>
  </ProductOverview>

  <!-- ========================================================= -->
  <!-- TECH STACK                                               -->
  <!-- ========================================================= -->
  <TechStack>
    <Frontend>
      Web-based frontend built to reflect Figma designs exactly.
    </Frontend>

    <Backend>
      Supabase-managed backend logic with server-side enforcement of PRD rules.
    </Backend>

    <Database>
      Supabase Postgres database.
    </Database>

    <Auth>
      Supabase Auth with role-based access controls.
    </Auth>

    <Payments>
      Stripe used exclusively for billing and subscription management.
    </Payments>

    <Deployment>
      Vercel used for all production and preview deployments.
    </Deployment>

    <AIProviders>
      <Provider name="ChatGPT">
        Responsibilities include structuring, summarizing, coordinating workflows,
        generating boilerplate, and producing handoff artifacts.
      </Provider>
      <Provider name="Claude">
        Responsibilities include architecture decisions, deep debugging,
        refactoring, and validation of complex logic.
      </Provider>
    </AIProviders>
  </TechStack>

  <!-- ========================================================= -->
  <!-- FILE STRUCTURE                                           -->
  <!-- ========================================================= -->
  <FileStructure>
    <!-- Optimized for AI navigation and minimal token usage -->
    <RepositoryTree>
      /frontend
        /components
        /pages
        /styles
      /backend
        /api
        /services
      /shared
        /schemas
        /utils
      /n8n
        /workflows
      /docs
      /config
      README.md
    </RepositoryTree>
  </FileStructure>

  <!-- ========================================================= -->
  <!-- NAMING CONVENTIONS                                       -->
  <!-- ========================================================= -->
  <NamingConventions>
    <Files>kebab-case</Files>
    <Components>PascalCase</Components>
    <Hooks>camelCase prefixed with use</Hooks>
    <ApiRoutes>kebab-case</ApiRoutes>
    <DatabaseTables>snake_case</DatabaseTables>
    <DatabaseFields>snake_case</DatabaseFields>
  </NamingConventions>

  <!-- ========================================================= -->
  <!-- DESIGN SYSTEM                                            -->
  <!-- ========================================================= -->
  <DesignSystem>
    <FigmaAuthority>
      Figma is the single source of truth for all UI and UX decisions.
    </FigmaAuthority>

    <Typography>
      <!-- Placeholder until defined in Figma -->
      <PrimaryFont>PLACEHOLDER</PrimaryFont>
    </Typography>

    <ColorPalette>
      <!-- Semantic meaning only, values defined in Figma -->
      <Primary>PLACEHOLDER</Primary>
      <Secondary>PLACEHOLDER</Secondary>
      <Error>PLACEHOLDER</Error>
    </ColorPalette>

    <ComponentStandards>
      Components must be reusable, stateless where possible, and derived directly
      from Figma components.
    </ComponentStandards>
  </DesignSystem>

  <!-- ========================================================= -->
  <!-- SCREENS AND USER FLOW                                    -->
  <!-- ========================================================= -->
  <ScreensAndUserFlow>
    <Screens>
      Landing
      Authentication
      PRDEditor
      ValidationDashboard
      WorkflowExecutionView
    </Screens>

    <OnboardingFlow>
      User signs up, connects GitHub, uploads or creates initial PRD.
    </OnboardingFlow>

    <EdgeCases>
      Empty PRD, invalid XML, conflicting rules.
    </EdgeCases>
  </ScreensAndUserFlow>

  <!-- ========================================================= -->
  <!-- CORE FEATURES                                            -->
  <!-- ========================================================= -->
  <CoreFeatures>

    <Feature name="PRDIngestionAndValidation">
      <Purpose>
        Parse, validate, and store PRDs as immutable execution contracts.
      </Purpose>

      <Inputs>XML PRD document</Inputs>
      <Outputs>Validated PRD state</Outputs>

      <Dependencies>
        XML schema validation, Supabase storage.
      </Dependencies>

      <PseudoCode>
        if PRD.invalid:
          block_execution()
          explain_error()
      </PseudoCode>
    </Feature>

    <Feature name="AIActionEnforcement">
      <Purpose>
        Validate every AI-proposed action against the PRD before execution.
      </Purpose>

      <SideEffects>
        Blocks non-compliant actions and logs violations.
      </SideEffects>
    </Feature>

  </CoreFeatures>

  <!-- ========================================================= -->
  <!-- DATABASE SCHEMA                                          -->
  <!-- ========================================================= -->
  <DatabaseSchema>
    <Table name="prds">
      <Field name="id" type="uuid" />
      <Field name="xml" type="text" />
      <Field name="version" type="text" />
      <Constraints>id is primary key</Constraints>
    </Table>

    <Table name="violations">
      <Field name="id" type="uuid" />
      <Field name="prd_id" type="uuid" />
      <Field name="description" type="text" />
    </Table>
  </DatabaseSchema>

  <!-- ========================================================= -->
  <!-- SECURITY AND COMPLIANCE                                  -->
  <!-- ========================================================= -->
  <SecurityAndCompliance>
    <Rules>
      Secrets must never be stored in frontend code.
      Rate limiting enforced at API boundaries.
    </Rules>
  </SecurityAndCompliance>

  <!-- ========================================================= -->
  <!-- AI CODING RULES                                          -->
  <!-- ========================================================= -->
  <AICodingRules>
    <Rule>AI must debug automatically before implementation.</Rule>
    <Rule>AI must propose fixes before applying them.</Rule>
    <Rule>AI must not refactor unrelated files.</Rule>
    <Rule>AI must treat this PRD and GitHub as authoritative.</Rule>
  </AICodingRules>

  <!-- ========================================================= -->
  <!-- AGENT ROLES                                              -->
  <!-- ========================================================= -->
  <AgentRoles>
    <FeatureImplementationAgent>
      <Responsibilities>Implement features exactly as specified.</Responsibilities>
      <ForbiddenActions>Scope expansion.</ForbiddenActions>
    </FeatureImplementationAgent>

    <DebugAndRefactorAgent>
      <Responsibilities>Diagnose and fix issues.</Responsibilities>
    </DebugAndRefactorAgent>
  </AgentRoles>

  <!-- ========================================================= -->
  <!-- N8N WORKFLOWS                                            -->
  <!-- ========================================================= -->
  <N8NWorkflows>
    <Workflow name="IntentIngestion" />
    <Workflow name="FeatureBuild" />
    <Workflow name="Deployment" />
  </N8NWorkflows>

  <!-- ========================================================= -->
  <!-- CROSS-AI COMMUNICATION                                   -->
  <!-- ========================================================= -->
  <CrossAICommunication>
    <!-- Lossless handoff format -->
    <HandoffFormat>
      ContextSummary
      DecisionsMade
      OpenQuestions
      FilesTouched
      NextActions
    </HandoffFormat>
  </CrossAICommunication>

  <!-- ========================================================= -->
  <!-- COACHING AND TEACHING                                    -->
  <!-- ========================================================= -->
  <CoachingAndTeaching>
    <Principles>
      Teach patterns, not trivia.
      Never block execution.
    </Principles>
  </CoachingAndTeaching>

  <!-- ========================================================= -->
  <!-- CONSTRAINTS                                              -->
  <!-- ========================================================= -->
  <Constraints>
    <NonGoals>
      No mobile app.
      No alternative tech stack.
    </NonGoals>
  </Constraints>

  <!-- ========================================================= -->
  <!-- VERSIONING                                               -->
  <!-- ========================================================= -->
  <VersioningAndChangelog>
    <Version>1.0.0</Version>
    <Summary>Initial genesis PRD.</Summary>
  </VersioningAndChangelog>

</ProductRequirementsDocument>
